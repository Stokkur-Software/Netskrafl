application: netskrafl
module: skraflstats
version: 2
runtime: python27
api_version: 1
threadsafe: false

instance_class: B2
basic_scaling:
  max_instances: 1
  idle_timeout: 2m

libraries:
- name: ssl
  version: latest
- name: grpcio
  version: 1.0.0

builtins:
- deferred: on

handlers:
- url: /stats/login
  script: skraflstats.app
- url: /_ah/queue/deferred
  script: $PYTHON_LIB/google/appengine/ext/deferred/handler.py
  login: admin
- url: /_ah/.*
  script: skraflstats.app
  login: admin
- url: /stats/.*
  script: skraflstats.app
  login: admin
  auth_fail_action: unauthorized

skip_files:
- ^resources/.*\.txt$
- ^resources/.*\.dawg$
- ^resources/.*\.dawg\.pickle$ # DAWG trees in pickled form
- ^(.*/)?.*\.psd$
- ^(.*/)?.*\.ai$
- ^(.*/)?.*\.log$
- ^(.*/)?.*\.md$
- ^(.*/)?.*\.bak$
- ^(.*/)?.*\.bat$
- ^(.*/)?.*\.tmp$
- ^(.*/)?.*\.TMP$
- ^(.*/)?.*\.less$
- ^(.*/)?#.*#$
- ^(.*/)?.*~$
- ^(.*/)?.*\.py[co]$
- ^(.*/)?.*/RCS/.*$
- ^\.git/.*$
- ^node_modules/.*$
- ^[gG]runtfile.js$
- ^(.*/)?\..*$
